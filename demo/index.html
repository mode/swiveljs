<html>
  <head>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>

    <script src="swivel.all.js"></script>
  </head>

  <body>
    <script type="text/javascript">
      var chartColorsAccessor = function(row) {
        return {
          'colors': row.colors,
          'chart_type': row.chart_type,
          'all_charts': parseInt(row.all_charts)
        }
      };

      dataset = d3.csv("datasets/chart_colors.csv", chartColorsAccessor, function(dataset) {
        var pivot = swivel
          .data(dataset)
          .fields('colors', 'chart_type')
          .pivots('chart_type')
          .select(swivel.sum('all_charts'))
          .all()

        console.log(pivot);
      });

      d3.json('datasets/nfl_large.json', function(dataset) {
        console.log(dataset);

        var pivot = swivel
          .data(dataset.content)
          .fields('team', 'season')
          .pivots('season')
          .select(swivel.sum('yards'), 'SUM(yards)')
          .select(swivel.average('yards'), 'AVG(yards)')
          .where(function(row) { return row['season'] > 1980; })
          .all();

        console.log(pivot);
      });
    </script>
  </body>
</html>
